实施 OpenSpec 变更中的任务。

**输入**：可选在 `/opsx:apply` 之后指定 `--change <name>`。如果省略，必须提示选择可用变更。

**步骤**

1. **如果没有提供变更名称，提示选择**

   运行 `openspec list --json` 获取可用变更。使用 **AskUserQuestion 工具** 让用户选择。

   显示具有 tasks.md 的变更（可实施）。将具有不完整任务的变更标记为"（进行中）"。

   **重要**：不要猜测或自动选择变更。始终让用户选择。

2. **获取应用指令**

   ```bash
   openspec instructions apply --change "<name>" --json
   ```

   这会返回：
   - 上下文文件路径（提案、规范、设计、任务）
   - 进度（总数、已完成、剩余）
   - 任务列表及状态
   - 基于当前状态的动态指令

   **处理状态：**
   - 如果 `state: "blocked"`（缺少产物）：显示消息，建议使用 `/opsx:continue`
   - 如果 `state: "all_done"`：祝贺，建议归档
   - 否则：继续实施

3. **阅读上下文文件**

   阅读 `contextFiles` 中列出的文件：
   - `proposal` - 为什么和是什么
   - `specs` - 需求和场景（使用 glob 模式查找所有）
   - `design` - 技术方法（如果存在）
   - `tasks` - 实施检查清单

4. **显示当前进度**

   显示：
   - 进度："N/M 任务完成"
   - 剩余任务概述
   - 来自 CLI 的动态指令

5. **实施任务（循环直到完成或阻塞）**

   对于每个待处理任务：
   - 显示正在处理的任务
   - 进行所需的代码更改
   - 保持更改最小化且专注于每个任务
   - 在 tasks.md 中标记任务完成：`- [ ]` → `- [x]`
   - 继续下一个任务

   **暂停如果：**
   - 任务不清晰 → 请求澄清
   - 实施揭示设计问题 → 建议更新产物
   - 遇到错误或阻塞 → 报告并等待指导
   - 用户中断

6. **在完成或暂停时，显示状态**

   显示：
   - 本会话完成的任务
   - 整体进度："N/M 任务完成"
   - 如果全部完成：建议归档
   - 如果暂停：解释原因并等待指导

**实施期间输出**

```
## 实施中: <change-name>

正在处理任务 3/7: <任务描述>
[...实施中...]
✓ 任务完成

正在处理任务 4/7: <任务描述>
[...实施中...]
✓ 任务完成
```

**完成时输出**

```
## 实施完成

**变更:** <change-name>
**进度:** 7/7 任务完成 ✓

### 本会话完成
- [x] 任务 1
- [x] 任务 2
...

所有任务完成！准备归档此变更。
```

**暂停时输出（遇到问题）**

```
## 实施暂停

**变更:** <change-name>
**进度:** 4/7 任务完成

### 遇到问题
<问题描述>

**选项:**
1. <选项 1>
2. <选项 2>
3. 其他方法

你想怎么做？
```

**护栏**
- 继续处理任务直到完成或阻塞
- 始终在开始前阅读上下文（规范、设计）
- 如果任务模糊，暂停并在实施前询问
- 如果实施揭示问题，暂停并建议产物更新
- 保持代码更改最小化且限定在每个任务范围内
- 立即在完成每个任务后更新任务复选框
- 在错误、阻塞或不清楚的需求上暂停——不要猜测

**流畅工作流集成**

此技能支持"对变更的操作"模型：

- **可以随时调用**：在所有产物完成之前（如果 tasks.md 存在），在部分实施之后，与其他操作交错
- **允许产物更新**：如果实施揭示设计问题，建议更新产物——不是阶段锁定，流畅工作
